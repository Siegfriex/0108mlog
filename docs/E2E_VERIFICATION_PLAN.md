# 마음로그 V5.0 E2E 검증 계획서

**문서 버전**: 1.0  
**작성일**: 2026-01-16  
**기준 문서**: PRD.md v5.8, PRD_플로우차트_구조_정리.md v2.0  
**검증 범위**: Phase 0 MVP 완료 기능 (17개 기능, FEAT-001 ~ FEAT-017)  
**검증 목적**: 모든 기능 명세에 대한 유저 시나리오 작성 및 플로우차트 구현 검증

---

## 목차

1. [검증 개요](#1-검증-개요)
2. [검증 범위 및 우선순위](#2-검증-범위-및-우선순위)
3. [기능별 유저 시나리오](#3-기능별-유저-시나리오)
4. [플로우차트 구현 검증 방법](#4-플로우차트-구현-검증-방법)
5. [검증 실행 계획](#5-검증-실행-계획)
6. [검증 결과 문서화](#6-검증-결과-문서화)
7. [부록: 검증 체크리스트](#7-부록-검증-체크리스트)

---

## 1. 검증 개요

### 1.1 검증 목표

1. **기능 명세 일치성 검증**: PRD에 명시된 17개 기능(FEAT-001 ~ FEAT-017)이 실제 구현과 일치하는지 확인
2. **플로우차트 구현 검증**: PRD 플로우차트에 정의된 사용자 플로우가 실제 앱에서 정확히 구현되었는지 확인
3. **유저 시나리오 검증**: 실제 사용자가 경험할 수 있는 모든 시나리오를 검증하여 UX 품질 보장
4. **에러 케이스 검증**: 예외 상황 및 에러 처리 플로우가 올바르게 구현되었는지 확인

### 1.2 검증 원칙

- **실제 사용자 관점**: 개발자 관점이 아닌 실제 사용자 관점에서 검증
- **플로우차트 기반**: PRD 플로우차트를 기준으로 검증
- **시나리오 중심**: 구체적인 유저 시나리오를 작성하여 검증
- **문서화 우선**: 모든 검증 결과를 문서화하여 추적 가능하도록 관리

### 1.3 검증 환경

- **테스트 환경**: `https://iness-mlog.web.app` (Production)
- **테스트 브라우저**: Chrome (최신), Safari (최신), Firefox (최신)
- **테스트 디바이스**: 데스크탑 (1920x1080), 모바일 (375x667, 414x896)
- **테스트 계정**: 익명 인증 (Firebase Anonymous Auth)

---

## 2. 검증 범위 및 우선순위

### 2.1 기능 우선순위 분류

| 우선순위 | 기능 수 | 기능 ID | 검증 우선순위 |
|---------|--------|---------|-------------|
| **P0 (Critical)** | 9개 | FEAT-001, FEAT-002, FEAT-003, FEAT-011, FEAT-012, FEAT-013, FEAT-015, FEAT-016, FEAT-017 | **1순위** |
| **P1 (High)** | 6개 | FEAT-004, FEAT-005, FEAT-006, FEAT-007, FEAT-009, FEAT-014 | **2순위** |
| **P2 (Medium)** | 2개 | FEAT-008, FEAT-010 | **3순위** |

### 2.2 검증 범위 매트릭스

| 기능 ID | 기능명 | 구현 상태 | 플로우차트 존재 | 검증 필요도 |
|---------|--------|----------|----------------|------------|
| FEAT-001 | 대화형 감정 체크인 + Day/Night Mode | 완료 | ✅ | **Critical** |
| FEAT-002 | 실시간 데이터 동기화 | 완료 | ✅ | **Critical** |
| FEAT-003 | AI 페르소나 기반 대화 | 완료 | ✅ | **Critical** |
| FEAT-004 | 게이미피케이션 | 완료 | ✅ | High |
| FEAT-005 | 기록 관리 | 완료 | ✅ | High |
| FEAT-006 | 기록 검색/필터 | 완료 | ✅ | High |
| FEAT-007 | 주간/월간 리포트 + 월간 회고록 | 완료 | ✅ | High |
| FEAT-008 | 안전망 시스템 | 부분 구현 | ✅ | Medium |
| FEAT-009 | 마이크로 액션 | 완료 | ✅ | High |
| FEAT-010 | 리마인드 설정 | 완료 | ✅ | Medium |
| FEAT-011 | 온보딩 | 완료 | ✅ | **Critical** |
| FEAT-012 | AI 페르소나 설정 | 완료 | ✅ | **Critical** |
| FEAT-013 | Bibliotherapy (콘텐츠 매개 대화) | 부분 구현 | ✅ | **Critical** |
| FEAT-014 | 감각적 몰입 및 사회적 연대 | 완료 | ✅ | High |
| FEAT-015 | 감정 여정 시각화 | 완료 | ✅ | **Critical** |
| FEAT-016 | 실시간 모니터 | 완료 | ✅ | **Critical** |
| FEAT-017 | 대화 저장/삭제 | 완료 | ✅ | **Critical** |

---

## 3. 기능별 유저 시나리오

### 3.1 FEAT-001: 대화형 감정 체크인 + Day/Night Mode

#### 시나리오 1-1: Day Mode 체크인 (정상 플로우)

**목적**: 낮 시간대(6시~18시) 빠른 체크인 플로우 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음
- 현재 시간이 6시~18시 사이
- 온보딩 완료 상태

**시나리오 단계**:
1. 사용자가 `/chat` 경로로 접근
2. **검증**: Day Mode 화면이 표시되는지 확인
3. 사용자가 감정 선택 모달에서 감정 선택 (예: "기쁨")
4. **검증**: 감정 선택 후 강도 슬라이더가 표시되는지 확인
5. 사용자가 강도를 7로 설정
6. 사용자가 "대화 시작하기" 버튼 클릭
7. **검증**: 채팅 인터페이스가 표시되고 AI 인사 메시지가 3초 이내에 표시되는지 확인
8. 사용자가 "오늘 날씨가 좋아서 기분이 좋아요" 메시지 입력 및 전송
9. **검증**: AI 응답이 8초 이내에 생성되는지 확인 (타임아웃 시 폴백 메시지 표시)
10. 사용자가 퀵 칩 중 하나 선택 (예: "더 말해보기")
11. **검증**: 퀵 칩 선택 시 대화가 이어지는지 확인
12. 사용자가 "완료" 버튼 클릭
13. **검증**: 상황 태그 선택 모달이 표시되는지 확인
14. 사용자가 상황 태그 2개 선택 (예: "집", "혼자")
15. 사용자가 "저장하기" 버튼 클릭
16. **검증**: 저장 성공 피드백이 즉시 표시되는지 확인 (P95 < 800ms)
17. **검증**: 마이크로 액션 제안이 표시되는지 확인
18. **검증**: 타임라인에 새로운 감정 기록이 추가되는지 확인

**예상 결과**:
- ✅ Day Mode UI가 정확히 표시됨
- ✅ 모든 단계가 플로우차트 순서대로 진행됨
- ✅ 성능 목표 달성 (체크인 완료 시간 P95 < 45초)

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.1.1 (Day Mode 체크인 플로우)

---

#### 시나리오 1-2: Night Mode 체크인 (정상 플로우)

**목적**: 밤 시간대(18시~6시) 깊은 성찰 플로우 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음
- 현재 시간이 18시~6시 사이
- 온보딩 완료 상태

**시나리오 단계**:
1. 사용자가 `/chat` 경로로 접근
2. **검증**: Night Mode 화면이 표시되는지 확인 (별 배경, 다크 테마)
3. 사용자가 감정 그리드에서 감정 선택 (예: "불안")
4. **검증**: 일기 작성 단계로 전환되는지 확인
5. 사용자가 일기 작성 (예: "오늘 회사에서 스트레스를 많이 받았어요. 내일도 걱정이 됩니다.")
6. 사용자가 "분석하기" 버튼 클릭
7. **검증**: AI 분석이 8초 이내에 생성되는지 확인
8. **검증**: AI가 감정을 공감하고 인사이트를 제공하는지 확인
9. 사용자가 "저장하기" 버튼 클릭
10. **검증**: 저장 성공 피드백이 즉시 표시되는지 확인
11. **검증**: 타임라인에 새로운 감정 기록이 추가되는지 확인

**예상 결과**:
- ✅ Night Mode UI가 정확히 표시됨
- ✅ 깊은 성찰 플로우가 정확히 구현됨
- ✅ AI 응답 품질이 Night Mode에 적합한지 확인

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.1.2 (Night Mode 체크인 플로우)

---

#### 시나리오 1-3: 위기 감지 플로우

**목적**: 위기 감지 알고리즘이 작동하고 Safety 화면으로 자동 전환되는지 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음
- Day Mode 또는 Night Mode 체크인 진행 중

**시나리오 단계**:
1. 사용자가 감정 선택 (예: "슬픔")
2. 사용자가 강도를 10으로 설정
3. 사용자가 메시지 입력: "더 이상 살고 싶지 않아요"
4. **검증**: 위기 감지 알고리즘이 키워드("살고 싶지 않다")를 감지하는지 확인
5. **검증**: `/safety` 경로로 자동 리다이렉트되는지 확인
6. **검증**: 위기 대응 화면이 표시되는지 확인
7. **검증**: 긴급 연락처 및 위기 자원 정보가 표시되는지 확인

**예상 결과**:
- ✅ 위기 감지 알고리즘이 정확히 작동함
- ✅ Safety 화면으로 자동 전환됨
- ✅ 위기 대응 정보가 명확히 표시됨

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 3.3 (위기 감지 플로우)

---

#### 시나리오 1-4: 네트워크 오류 처리

**목적**: 네트워크 오류 시 폴백 메시지 및 재시도 로직 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음
- 네트워크 연결이 끊어진 상태 (개발자 도구로 시뮬레이션)

**시나리오 단계**:
1. 사용자가 Day Mode 체크인 시작
2. 사용자가 메시지 입력 및 전송
3. **검증**: 네트워크 오류 시 폴백 메시지가 표시되는지 확인
4. **검증**: 재시도 버튼이 표시되는지 확인
5. 네트워크 연결 복구
6. 사용자가 재시도 버튼 클릭
7. **검증**: 메시지가 정상적으로 전송되는지 확인

**예상 결과**:
- ✅ 네트워크 오류 시 적절한 폴백 메시지 표시
- ✅ 재시도 로직이 정상 작동함

---

### 3.2 FEAT-002: 실시간 데이터 동기화

#### 시나리오 2-1: 실시간 동기화 검증

**목적**: Firestore 실시간 리스너가 정상 작동하는지 검증

**전제 조건**:
- 사용자 A와 사용자 B가 동시에 앱 사용 중 (또는 같은 계정의 다른 디바이스)

**시나리오 단계**:
1. 사용자 A가 감정 체크인 완료
2. **검증**: 사용자 A의 타임라인에 즉시 반영되는지 확인
3. 사용자 B가 타임라인 화면 새로고침 없이 확인
4. **검증**: 사용자 B의 타임라인에도 새로운 기록이 실시간으로 표시되는지 확인
5. **검증**: 지연 시간이 1초 이내인지 확인

**예상 결과**:
- ✅ 실시간 동기화가 정상 작동함
- ✅ 지연 시간이 목표값 이내임

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.2 (실시간 동기화 플로우)

---

#### 시나리오 2-2: 오프라인 모드 검증

**목적**: 오프라인 상태에서도 기본 기능이 작동하는지 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음
- 네트워크 연결이 끊어진 상태

**시나리오 단계**:
1. 네트워크 연결 끊기 (개발자 도구)
2. 사용자가 감정 체크인 시도
3. **검증**: 오프라인 상태 표시가 나타나는지 확인
4. **검증**: 로컬에 임시 저장되는지 확인
5. 네트워크 연결 복구
6. **검증**: 자동으로 동기화되는지 확인

**예상 결과**:
- ✅ 오프라인 모드가 정상 작동함
- ✅ 재연결 시 자동 동기화됨

---

### 3.3 FEAT-003: AI 페르소나 기반 대화

#### 시나리오 3-1: 기본 페르소나 대화

**목적**: 기본 AI 페르소나와의 대화 품질 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음
- 기본 페르소나 설정 완료

**시나리오 단계**:
1. 사용자가 Day Mode 체크인 시작
2. 사용자가 "오늘 회사에서 스트레스를 받았어요" 메시지 전송
3. **검증**: AI 응답이 페르소나 특성(따뜻함, 직설성 등)을 반영하는지 확인
4. **검증**: AI 응답이 맥락을 이해하고 있는지 확인
5. 사용자가 추가 메시지 전송
6. **검증**: 대화 히스토리가 유지되는지 확인

**예상 결과**:
- ✅ AI 응답이 페르소나 특성을 반영함
- ✅ 대화 맥락이 유지됨

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.3 (AI 대화 플로우)

---

#### 시나리오 3-2: 커스텀 페르소나 대화

**목적**: 사용자가 설정한 커스텀 페르소나와의 대화 검증

**전제 조건**:
- 사용자가 커스텀 페르소나 설정 완료 (예: "유머러스한 친구", 직설성 높음)

**시나리오 단계**:
1. 사용자가 `/profile/persona` 경로로 접근
2. 사용자가 페르소나 설정 확인
3. 사용자가 `/chat` 경로로 이동하여 체크인 시작
4. 사용자가 메시지 전송
5. **검증**: AI 응답이 커스텀 페르소나 특성을 반영하는지 확인
6. **검증**: 말투(존대/반말)가 설정대로 작동하는지 확인

**예상 결과**:
- ✅ 커스텀 페르소나가 정확히 반영됨
- ✅ 말투 설정이 정확히 작동함

---

### 3.4 FEAT-011: 온보딩

#### 시나리오 11-1: 전체 온보딩 플로우

**목적**: 온보딩 6단계가 순서대로 진행되는지 검증

**전제 조건**:
- 신규 사용자 (온보딩 미완료)

**시나리오 단계**:
1. 사용자가 앱 최초 접근
2. **검증**: 1단계 환영 화면이 표시되는지 확인
3. 사용자가 "시작하기" 버튼 클릭
4. **검증**: 2단계 권한 요청 화면이 표시되는지 확인
5. 사용자가 알림 권한 허용, 위치 권한 거부
6. **검증**: 권한 설정이 저장되는지 확인
7. 사용자가 "다음" 버튼 클릭
8. **검증**: 3단계 초기 평가 화면이 표시되는지 확인
9. 사용자가 질문 1-3 모두 완료
10. **검증**: 진행률 바가 업데이트되는지 확인 (3/6)
11. 사용자가 "다음" 버튼 클릭
12. **검증**: 4단계 목표 설정 화면이 표시되는지 확인
13. 사용자가 목표 카드 선택
14. 사용자가 "다음" 버튼 클릭
15. **검증**: 5단계 개인화 설정 화면이 표시되는지 확인
16. 사용자가 알림 시간 설정 (오전 9시)
17. 사용자가 "다음" 버튼 클릭
18. **검증**: 6단계 첫 체크인 가이드가 표시되는지 확인
19. 사용자가 튜토리얼 완료
20. **검증**: 채팅 화면으로 자동 이동하는지 확인
21. **검증**: 온보딩 완료 상태가 저장되는지 확인 (localStorage)

**예상 결과**:
- ✅ 모든 온보딩 단계가 순서대로 진행됨
- ✅ 진행률 표시가 정확함
- ✅ 스킵 기능이 정상 작동함

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 1.1 (온보딩 플로우)

---

#### 시나리오 11-2: 온보딩 스킵

**목적**: 온보딩 중간에 스킵할 수 있는지 검증

**전제 조건**:
- 신규 사용자 (온보딩 진행 중)

**시나리오 단계**:
1. 사용자가 3단계 초기 평가 화면에서 "건너뛰기" 버튼 클릭
2. **검증**: 다음 단계로 이동하는지 확인
3. 사용자가 4단계 목표 설정 화면에서 "건너뛰기" 버튼 클릭
4. **검증**: 기본값이 적용되는지 확인
5. 사용자가 6단계 튜토리얼에서 "건너뛰기" 버튼 클릭
6. **검증**: 채팅 화면으로 이동하는지 확인

**예상 결과**:
- ✅ 스킵 기능이 정상 작동함
- ✅ 기본값이 올바르게 적용됨

---

### 3.5 FEAT-005: 기록 관리

#### 시나리오 5-1: 타임라인 조회

**목적**: 기록 타임라인이 정상적으로 표시되는지 검증

**전제 조건**:
- 사용자가 감정 체크인을 최소 5회 이상 완료함

**시나리오 단계**:
1. 사용자가 `/journal` 경로로 접근
2. **검증**: 타임라인이 표시되는지 확인
3. **검증**: 날짜별로 그룹화되어 표시되는지 확인
4. **검증**: 감정 아이콘과 강도가 표시되는지 확인
5. 사용자가 특정 기록 카드 클릭
6. **검증**: 상세 화면(`/journal/detail/:id`)으로 이동하는지 확인
7. **검증**: 대화 내용이 모두 표시되는지 확인

**예상 결과**:
- ✅ 타임라인이 정확히 표시됨
- ✅ 상세 화면이 정상 작동함

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.4 (기록 관리 플로우)

---

#### 시나리오 5-2: 기록 검색

**목적**: 검색 기능이 정상 작동하는지 검증

**전제 조건**:
- 사용자가 감정 체크인을 최소 10회 이상 완료함

**시나리오 단계**:
1. 사용자가 `/journal/search` 경로로 접근
2. 사용자가 검색어 입력: "스트레스"
3. **검증**: 관련 기록이 필터링되어 표시되는지 확인
4. 사용자가 감정 필터 선택: "불안"
5. **검증**: 감정 필터가 적용되는지 확인
6. 사용자가 날짜 범위 선택
7. **검증**: 날짜 필터가 적용되는지 확인

**예상 결과**:
- ✅ 검색 기능이 정상 작동함
- ✅ 필터 기능이 정확히 작동함

---

### 3.6 FEAT-007: 주간/월간 리포트

#### 시나리오 7-1: 주간 리포트 조회

**목적**: 주간 리포트가 정상적으로 생성되고 표시되는지 검증

**전제 조건**:
- 사용자가 최소 7일 이상 감정 체크인을 완료함

**시나리오 단계**:
1. 사용자가 `/reports/weekly` 경로로 접근
2. **검증**: 주간 리포트가 로딩되는지 확인
3. **검증**: 감정 분포 차트가 표시되는지 확인
4. **검증**: 감정 트렌드 차트가 표시되는지 확인
5. **검증**: 인사이트 텍스트가 표시되는지 확인
6. 사용자가 "다음 주 실험" 카드 확인
7. **검증**: 실험 제안이 표시되는지 확인

**예상 결과**:
- ✅ 주간 리포트가 정상적으로 생성됨
- ✅ 모든 차트가 정확히 표시됨

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.5 (리포트 플로우)

---

#### 시나리오 7-2: 월간 회고록 조회

**목적**: 월간 회고록이 정상적으로 생성되는지 검증

**전제 조건**:
- 사용자가 최소 30일 이상 감정 체크인을 완료함

**시나리오 단계**:
1. 사용자가 `/reports/monthly-retrospective` 경로로 접근
2. **검증**: 월간 회고록이 로딩되는지 확인
3. **검증**: "선공감 후분석" UX가 적용되는지 확인 (먼저 따뜻한 서사, 이후 분석)
4. **검증**: 감정 여정이 서사로 재구성되어 표시되는지 확인
5. 사용자가 스크롤하여 분석 섹션 확인
6. **검증**: 데이터 기반 분석이 표시되는지 확인

**예상 결과**:
- ✅ 월간 회고록이 정상적으로 생성됨
- ✅ UX 플로우가 정확히 구현됨

---

### 3.7 FEAT-015: 감정 여정 시각화

#### 시나리오 15-1: Sankey Flow 조회

**목적**: Sankey Flow 차트가 정상적으로 표시되는지 검증

**전제 조건**:
- 사용자가 최소 30일 이상 감정 체크인을 완료함

**시나리오 단계**:
1. 사용자가 `/journal/journey` 경로로 접근
2. **검증**: Sankey Flow 차트가 표시되는지 확인
3. **검증**: 감정 간 전환 흐름이 시각화되는지 확인
4. 사용자가 특정 노드 클릭
5. **검증**: 상세 정보가 표시되는지 확인

**예상 결과**:
- ✅ Sankey Flow 차트가 정상적으로 표시됨
- ✅ 인터랙티브 기능이 정상 작동함

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.6 (감정 여정 시각화 플로우)

---

#### 시나리오 15-2: Year in Pixels 조회

**목적**: Year in Pixels 시각화가 정상적으로 표시되는지 검증

**전제 조건**:
- 사용자가 최소 1년 이상 감정 체크인을 완료함 (또는 모의 데이터)

**시나리오 단계**:
1. 사용자가 `/journal/journey` 경로로 접근
2. 사용자가 "Year in Pixels" 탭 선택
3. **검증**: 연도별 픽셀 그리드가 표시되는지 확인
4. **검증**: 각 날짜의 감정이 색상으로 표시되는지 확인
5. 사용자가 특정 날짜 클릭
6. **검증**: 해당 날짜의 상세 정보가 표시되는지 확인

**예상 결과**:
- ✅ Year in Pixels가 정상적으로 표시됨
- ✅ 인터랙티브 기능이 정상 작동함

---

### 3.8 FEAT-016: 실시간 모니터

#### 시나리오 16-1: 실시간 모니터 대시보드 조회

**목적**: 실시간 모니터 대시보드가 정상적으로 작동하는지 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음

**시나리오 단계**:
1. 사용자가 `/reports/monitor` 경로로 접근
2. **검증**: 실시간 차트가 표시되는지 확인
3. **검증**: 현재 감정 상태가 표시되는지 확인
4. 사용자가 다른 탭으로 이동 후 다시 모니터 탭으로 복귀
5. **검증**: 실시간 데이터가 업데이트되는지 확인

**예상 결과**:
- ✅ 실시간 모니터가 정상적으로 작동함
- ✅ 데이터가 실시간으로 업데이트됨

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.7 (실시간 모니터 플로우)

---

### 3.9 FEAT-013: Bibliotherapy (콘텐츠 매개 대화)

#### 시나리오 13-1: 콘텐츠 큐레이션 조회

**목적**: 감정 상태에 맞는 콘텐츠가 큐레이션되는지 검증

**전제 조건**:
- 사용자가 감정 체크인 완료 (예: "슬픔")

**시나리오 단계**:
1. 사용자가 `/content` 경로로 접근
2. **검증**: 감정 상태에 맞는 콘텐츠가 추천되는지 확인
3. 사용자가 "시" 카테고리 선택
4. **검증**: 시 목록이 표시되는지 확인
5. 사용자가 특정 시 클릭
6. **검증**: 시 내용이 표시되는지 확인
7. 사용자가 "AI와 대화하기" 버튼 클릭
8. **검증**: Bibliotherapy 세션이 시작되는지 확인

**예상 결과**:
- ✅ 콘텐츠 큐레이션이 정상 작동함
- ✅ Bibliotherapy 세션이 정상 시작됨

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.8 (콘텐츠 큐레이션 플로우)

---

### 3.10 FEAT-012: AI 페르소나 설정

#### 시나리오 12-1: 페르소나 설정 및 변경

**목적**: AI 페르소나 설정 기능이 정상 작동하는지 검증

**전제 조건**:
- 사용자가 앱에 로그인되어 있음

**시나리오 단계**:
1. 사용자가 `/profile/persona` 경로로 접근
2. **검증**: 현재 페르소나 설정이 표시되는지 확인
3. 사용자가 "페르소나 편집" 버튼 클릭
4. 사용자가 이름 변경: "친구"
5. 사용자가 MBTI 선택: "ENFP"
6. 사용자가 슬라이더 조정: 따뜻함 8, 직설성 3, 유머 7, 전문성 5
7. 사용자가 말투 선택: "반말"
8. 사용자가 관계 선택: "친구"
9. 사용자가 "저장" 버튼 클릭
10. **검증**: 설정이 저장되는지 확인
11. 사용자가 `/chat` 경로로 이동하여 체크인 시작
12. **검증**: 변경된 페르소나가 반영되는지 확인

**예상 결과**:
- ✅ 페르소나 설정이 정상적으로 저장됨
- ✅ 변경된 페르소나가 대화에 반영됨

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.9 (페르소나 설정 플로우)

---

### 3.11 FEAT-017: 대화 저장/삭제

#### 시나리오 17-1: 대화 저장/삭제 관리

**목적**: 대화 저장 및 삭제 기능이 정상 작동하는지 검증

**전제 조건**:
- 사용자가 감정 체크인을 완료함

**시나리오 단계**:
1. 사용자가 `/profile/conversations` 경로로 접근
2. **검증**: 저장된 대화 목록이 표시되는지 확인
3. 사용자가 특정 대화 선택
4. **검증**: 대화 상세 내용이 표시되는지 확인
5. 사용자가 "삭제" 버튼 클릭
6. **검증**: 삭제 확인 다이얼로그가 표시되는지 확인
7. 사용자가 "확인" 버튼 클릭
8. **검증**: 대화가 삭제되는지 확인
9. **검증**: 목록에서 제거되는지 확인

**예상 결과**:
- ✅ 대화 저장/삭제 기능이 정상 작동함
- ✅ 삭제 확인 다이얼로그가 정상 작동함

**플로우차트 매핑**: `PRD_플로우차트_구조_정리.md` 섹션 2.10 (대화 관리 플로우)

---

## 4. 플로우차트 구현 검증 방법

### 4.1 검증 기준

각 플로우차트는 다음 기준으로 검증합니다:

1. **노드 존재성**: 플로우차트의 모든 노드(프로세스, 결정, 시작/종료)가 실제 구현에 존재하는가?
2. **엣지 정확성**: 플로우차트의 모든 엣지(화살표)가 실제 플로우와 일치하는가?
3. **조건 분기**: 결정 노드(마름모)의 조건 분기가 정확히 구현되었는가?
4. **예외 처리**: 에러 경로(점선)가 올바르게 구현되었는가?
5. **성능 목표**: 플로우차트에 명시된 성능 목표가 달성되었는가?

### 4.2 검증 방법

#### 방법 1: 수동 E2E 테스트

- **도구**: 브라우저 개발자 도구, 스크린샷 도구
- **절차**:
  1. 플로우차트를 화면에 표시
  2. 실제 앱에서 플로우를 따라가며 각 노드와 엣지를 확인
  3. 스크린샷으로 각 단계 캡처
  4. 불일치 사항 기록

#### 방법 2: 자동화 테스트 (선택적)

- **도구**: Playwright, Cypress
- **절차**:
  1. 플로우차트를 기반으로 테스트 케이스 작성
  2. 자동화 스크립트 실행
  3. 결과 리포트 생성

### 4.3 플로우차트별 검증 체크리스트

각 플로우차트에 대해 다음 항목을 확인합니다:

- [ ] 시작 노드가 정확히 구현되었는가?
- [ ] 모든 프로세스 노드가 순서대로 실행되는가?
- [ ] 모든 결정 노드의 조건이 정확한가?
- [ ] Yes/No 분기가 올바르게 구현되었는가?
- [ ] 에러 경로가 적절히 처리되는가?
- [ ] 종료 노드에 정확히 도달하는가?
- [ ] 성능 목표가 달성되었는가?

---

## 5. 검증 실행 계획

### 5.1 검증 일정

| 단계 | 기간 | 작업 내용 | 담당 |
|------|------|----------|------|
| **1단계: P0 기능 검증** | 3일 | FEAT-001, FEAT-002, FEAT-003, FEAT-011, FEAT-012, FEAT-013, FEAT-015, FEAT-016, FEAT-017 검증 | QA 팀 |
| **2단계: P1 기능 검증** | 2일 | FEAT-004, FEAT-005, FEAT-006, FEAT-007, FEAT-009, FEAT-014 검증 | QA 팀 |
| **3단계: P2 기능 검증** | 1일 | FEAT-008, FEAT-010 검증 | QA 팀 |
| **4단계: 통합 검증** | 1일 | 전체 플로우 통합 검증 및 회귀 테스트 | QA 팀 |
| **5단계: 결과 문서화** | 1일 | 검증 결과 리포트 작성 및 이슈 트래킹 | QA 팀 |

**총 소요 기간**: 8일

### 5.2 검증 우선순위

1. **1순위 (즉시 검증)**: P0 기능 9개
2. **2순위 (1주일 내)**: P1 기능 6개
3. **3순위 (2주일 내)**: P2 기능 2개

### 5.3 검증 리소스

- **인력**: QA 엔지니어 1명 (또는 개발자 자체 검증)
- **도구**: 브라우저 개발자 도구, 스크린샷 도구, 문서화 도구
- **환경**: Production 환경 (`https://iness-mlog.web.app`)

---

## 6. 검증 결과 문서화

### 6.1 검증 결과 리포트 구조

각 기능별로 다음 형식으로 리포트를 작성합니다:

```markdown
## FEAT-XXX: [기능명] 검증 결과

### 검증 일자
- 검증 시작: YYYY-MM-DD HH:MM
- 검증 완료: YYYY-MM-DD HH:MM
- 검증자: [이름]

### 검증 범위
- 시나리오 수: N개
- 플로우차트 매핑: [플로우차트 ID]

### 검증 결과 요약
- 통과: N개
- 실패: N개
- 블로커: N개

### 상세 결과

#### 시나리오 X-X: [시나리오명]
- **상태**: ✅ 통과 / ❌ 실패 / ⚠️ 부분 통과
- **이슈**: [이슈 설명]
- **스크린샷**: [링크]
- **플로우차트 일치성**: ✅ 일치 / ❌ 불일치

### 플로우차트 구현 검증
- [ ] 시작 노드 구현 확인
- [ ] 프로세스 노드 순서 확인
- [ ] 결정 노드 조건 확인
- [ ] 분기 구현 확인
- [ ] 에러 경로 확인
- [ ] 종료 노드 확인
- [ ] 성능 목표 달성 확인

### 발견된 이슈
1. [이슈 ID]: [이슈 설명]
   - 우선순위: Critical / High / Medium / Low
   - 재현 단계: [단계]
   - 예상 수정 시간: [시간]

### 권장 사항
- [권장 사항 1]
- [권장 사항 2]
```

### 6.2 이슈 트래킹

발견된 이슈는 다음 형식으로 트래킹합니다:

| 이슈 ID | 기능 ID | 우선순위 | 상태 | 담당자 | 예상 수정일 |
|---------|---------|---------|------|--------|-----------|
| ISSUE-001 | FEAT-001 | Critical | Open | [이름] | YYYY-MM-DD |

### 6.3 최종 검증 리포트

모든 검증이 완료된 후, 다음 형식으로 최종 리포트를 작성합니다:

```markdown
# 마음로그 V5.0 E2E 검증 최종 리포트

## 검증 개요
- 검증 기간: YYYY-MM-DD ~ YYYY-MM-DD
- 검증 기능 수: 17개
- 검증 시나리오 수: N개
- 전체 통과율: XX%

## 기능별 검증 결과
[기능별 상세 결과]

## 플로우차트 구현 검증 결과
[플로우차트별 상세 결과]

## 발견된 이슈 요약
- Critical: N개
- High: N개
- Medium: N개
- Low: N개

## 권장 사항
[권장 사항]

## 다음 단계
[다음 단계 계획]
```

---

## 7. 부록: 검증 체크리스트

### 7.1 전체 기능 검증 체크리스트

- [ ] FEAT-001: 대화형 감정 체크인 + Day/Night Mode
- [ ] FEAT-002: 실시간 데이터 동기화
- [ ] FEAT-003: AI 페르소나 기반 대화
- [ ] FEAT-004: 게이미피케이션
- [ ] FEAT-005: 기록 관리
- [ ] FEAT-006: 기록 검색/필터
- [ ] FEAT-007: 주간/월간 리포트 + 월간 회고록
- [ ] FEAT-008: 안전망 시스템
- [ ] FEAT-009: 마이크로 액션
- [ ] FEAT-010: 리마인드 설정
- [ ] FEAT-011: 온보딩
- [ ] FEAT-012: AI 페르소나 설정
- [ ] FEAT-013: Bibliotherapy (콘텐츠 매개 대화)
- [ ] FEAT-014: 감각적 몰입 및 사회적 연대
- [ ] FEAT-015: 감정 여정 시각화
- [ ] FEAT-016: 실시간 모니터
- [ ] FEAT-017: 대화 저장/삭제

### 7.2 플로우차트 검증 체크리스트

- [ ] 플로우 1: 온보딩
- [ ] 플로우 2.1: Day Mode 체크인
- [ ] 플로우 2.2: Night Mode 체크인
- [ ] 플로우 2.3: AI 대화
- [ ] 플로우 2.4: 기록 관리
- [ ] 플로우 2.5: 리포트
- [ ] 플로우 2.6: 감정 여정 시각화
- [ ] 플로우 2.7: 실시간 모니터
- [ ] 플로우 2.8: 콘텐츠 큐레이션
- [ ] 플로우 2.9: 페르소나 설정
- [ ] 플로우 2.10: 대화 관리
- [ ] 플로우 3.1: 위기 감지
- [ ] 플로우 3.2: 네트워크 오류 처리
- [ ] 플로우 3.3: 오프라인 모드

### 7.3 성능 목표 검증 체크리스트

- [ ] 체크인 완료 시간 P95 < 45초
- [ ] 감정 저장/피드백 P95 < 800ms
- [ ] AI 인사이트 표시 P95 < 8초
- [ ] 실시간 동기화 지연 시간 < 1초
- [ ] 페이지 로딩 시간 < 2초

---

## 문서 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2026-01-16 | 초안 작성 | [이름] |

---

## 참고 문서

- [PRD.md](docs/PRD.md) - 제품 요구사항 명세서 v5.8
- [PRD_플로우차트_구조_정리.md](docs/PRD_플로우차트_구조_정리.md) - 플로우차트 구조 정리 v2.0
- [PRD_CODE_MAPPING.md](docs/PRD_CODE_MAPPING.md) - 코드 매핑 문서
