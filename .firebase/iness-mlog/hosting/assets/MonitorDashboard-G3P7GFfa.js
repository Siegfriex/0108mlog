import{j as e,m as h}from"./framer-motion-BvSqCppS.js";import{r as i,i as f,N as g}from"./react-vendor-avSTGVV9.js";import{E as p,L as j,G as o}from"./index-B81HDj9r.js";import{b as u,u as y,I as d,V as b}from"./lucide-react-DyWIlm_Y.js";import{R as N,L as v,C as E,X as w,Y as k,T as C,i as T}from"./recharts-we3aRjdP.js";import"./firebase-Br2-H2XF.js";const A=({timelineData:s})=>{const[r,m]=i.useState(!0),c=i.useMemo(()=>s.filter(t=>(new Date().getTime()-new Date(t.date).getTime())/864e5<=7).sort((t,n)=>new Date(t.date).getTime()-new Date(n.date).getTime()).map(t=>({date:new Date(t.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"}),intensity:t.intensity||0,emotion:t.emotion})),[s]),x=i.useMemo(()=>{if(s.length<3)return[];const a=s.filter(l=>l.emotion===p.ANXIETY).length,t=s.filter(l=>(l.intensity||0)>=8).length,n=[];return a>s.length*.4&&n.push({type:"warning",message:"최근 불안한 감정이 자주 기록되고 있어요",icon:e.jsx(u,{size:20})}),t>s.length*.3&&n.push({type:"info",message:"강도가 높은 감정이 자주 나타나고 있어요",icon:e.jsx(y,{size:20})}),n},[s]);return i.useEffect(()=>{setTimeout(()=>m(!1),500)},[]),r?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(j,{})}):e.jsxs("div",{className:"w-full h-full flex flex-col p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(d,{size:28,className:"text-brand-primary"}),"실시간 모니터"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"당신의 감정 패턴을 실시간으로 추적하고 있어요"})]}),e.jsxs(o,{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"감정 추이 (최근 7일)"}),c.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(d,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"아직 충분한 데이터가 없어요"})]}):e.jsx("div",{className:"min-h-[200px]",children:e.jsx(N,{width:"100%",height:200,children:e.jsxs(v,{data:c,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#E2E8F0"}),e.jsx(w,{dataKey:"date",stroke:"#94A3B8",fontSize:12}),e.jsx(k,{domain:[0,10],stroke:"#94A3B8",fontSize:12}),e.jsx(C,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #E2E8F0",borderRadius:"12px"}}),e.jsx(T,{type:"monotone",dataKey:"intensity",stroke:"#2A8E9E",strokeWidth:3,dot:{r:4,fill:"#2A8E9E"},activeDot:{r:6}})]})})})]}),x.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"패턴 알림"}),x.map((a,t)=>e.jsx(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.1},children:e.jsx(o,{className:`
                  ${a.type==="warning"?"border-orange-200 bg-orange-50/50":"border-blue-200 bg-blue-50/50"}
                `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center shrink-0
                    ${a.type==="warning"?"text-orange-600 bg-orange-100":"text-blue-600 bg-blue-100"}
                  `,children:a.icon}),e.jsx("p",{className:"text-sm text-slate-700 flex-1",children:a.message})]})})},t))]}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-100 flex items-center justify-center text-purple-600 shrink-0",children:e.jsx(b,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"오늘의 인사이트"}),e.jsx("p",{className:"text-sm text-slate-600",children:s.length>0?`지금까지 ${s.length}개의 감정 기록을 남기셨네요. 계속 기록하면 더 정확한 패턴을 발견할 수 있어요.`:"감정을 기록하기 시작하면 인사이트를 제공해드릴게요."})]})]})})]})},M=()=>{const s=f();if(!s)return e.jsx(g,{to:"/",replace:!0});const{timelineData:r}=s;return e.jsx(A,{timelineData:r})};export{M as MonitorDashboardPage};
