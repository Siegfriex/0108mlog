import{u as D,a as k,j as e,m as d,A as M}from"./framer-motion-BL4N7xFA.js";import{r as l,h as G}from"./react-vendor-CHpw1G1i.js";import{M as T,H as $,I as A,B as W,J as _,o as B}from"./index-AFX2_y7y.js";import{R as C,a0 as O,a1 as R,J as H,a2 as P,X as V,a3 as X,a4 as q,a5 as K,a6 as J,g as Q,$ as Y,a7 as U,a8 as Z,a9 as ee}from"./lucide-react-J6DJLIhr.js";import{V as se}from"./VoicePlayer-B9Gf_T1N.js";import{R as te,L as ae,X as le,T as re,i as ie}from"./recharts-D37Qx2ho.js";import"./firebase-BBl07Gss.js";const ne=({onRefresh:a,threshold:o=80,children:g})=>{const[c,i]=l.useState(!1),t=D(0),u=k(t,[0,o],[0,1]),m=k(t,[0,o],[0,360]),v=k(t,b=>b>=o),[h,f]=l.useState("ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨"),y=l.useRef(null);G.useEffect(()=>v.on("change",N=>{f(N?"ë†“ìœ¼ë©´ ìƒˆë¡œê³ ì¹¨":"ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨")}),[v]);const p=async()=>{t.get()>=o&&!c&&(i(!0),await a(),i(!1)),t.set(0)};return e.jsxs("div",{ref:y,className:"relative overflow-hidden",children:[e.jsxs(d.div,{style:{y:t,opacity:u,rotate:m},className:"absolute top-0 left-1/2 -translate-x-1/2 z-content-base flex items-center gap-2 pt-4",children:[e.jsx(C,{size:24,className:"text-brand-primary"}),e.jsx("span",{className:"text-sm text-brand-primary font-medium",children:h})]}),e.jsx(d.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:p,style:{y:t},className:"min-h-full",children:g})]})},oe=3,ce=({persona:a})=>{const[o,g]=l.useState(T),[c,i]=l.useState(null),[t,u]=l.useState(!1),[m,v]=l.useState("ì§€ì¹œ í•˜ë£¨"),[h,f]=l.useState(!1),[y,p]=l.useState(0),b=l.useRef(null),N=l.useRef(null),j=l.useCallback(async(s=!1)=>{if(!(t||h&&y>=oe)){u(!0);try{const r=await $(m,a);r&&(g(n=>s?[...n,r]:[r,...n]),s||i(r.id),f(!1),p(0))}catch(r){console.error("ì½˜í…ì¸  ìƒì„± ì˜¤ë¥˜:",r),f(!0),p(n=>n+1)}finally{u(!1)}}},[t,m,a,h,y]),S=l.useCallback(()=>{f(!1),p(0),j(!1)},[j]),w=l.useCallback(()=>{j(!0)},[j]);l.useEffect(()=>{const s=new IntersectionObserver(n=>{n[0].isIntersecting&&!t&&!h&&w()},{threshold:.1,rootMargin:"100px"}),r=b.current;return r&&s.observe(r),()=>{r&&s.unobserve(r)}},[w,t,h]);const E=s=>{switch(s){case"poem":return e.jsx(ee,{size:20,strokeWidth:2});case"meditation":return e.jsx(Z,{size:20,strokeWidth:2});case"quote":return e.jsx(U,{size:20,strokeWidth:2});case"insight":return e.jsx(Y,{size:20,strokeWidth:2});default:return e.jsx(Q,{size:20,strokeWidth:2})}},z=s=>{switch(s){case"poem":return"from-orange-100 to-rose-100 text-rose-600";case"meditation":return"from-teal-100 to-emerald-100 text-teal-600";case"quote":return"from-blue-100 to-indigo-100 text-indigo-600";case"insight":return"from-violet-100 to-purple-100 text-purple-600";default:return"from-slate-100 to-gray-200 text-slate-600"}},I=new Date().toLocaleString("default",{month:"long"}),L=async()=>{f(!1),p(0),await j(!1)};return e.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden relative",children:[e.jsx(ne,{onRefresh:L,children:e.jsx("div",{className:"h-full flex flex-col max-w-full mx-auto relative bg-[#FDFDFD]",ref:N,children:e.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide py-6 px-4 min-h-0",children:[e.jsxs("div",{className:"mb-10 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:"ì¸ì‚¬ì´íŠ¸"}),e.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-100 px-3 py-1 rounded-full flex items-center gap-2",children:[e.jsx(O,{size:14})," ",I," 2024"]})]}),e.jsxs("div",{className:"relative bg-[#FFFBF7] rounded-[40px] p-6 shadow-xl shadow-orange-100/50 border border-orange-50 overflow-visible mb-8",children:[e.jsxs(d.div,{initial:{scale:0,y:10,opacity:0},animate:{scale:1,y:0,opacity:1},transition:{delay:.5,type:"spring"},className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-[#FF8E6E] text-white px-5 py-2.5 rounded-2xl shadow-lg shadow-orange-300/40 z-20 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ™‚"}),e.jsx("span",{className:"text-sm font-bold",children:"ê¸°ë¶„ì´ ì¢‹ì•„ì§€ê³  ìžˆì–´ìš”"}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-[#FF8E6E] rotate-45"})]}),e.jsx("div",{className:"h-48 mt-4",children:e.jsx(te,{width:"100%",height:192,children:e.jsxs(ae,{data:A,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#F472B6"})]})}),e.jsx(le,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"#94A3B8",fontSize:12,fontWeight:"bold"},dy:10}),e.jsx(re,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},cursor:{stroke:"#CBD5E1",strokeWidth:1,strokeDasharray:"4 4"}}),e.jsx(ie,{type:"monotone",dataKey:"score",stroke:"url(#lineGradient)",strokeWidth:4,dot:{r:0},activeDot:{r:6,fill:"#F472B6",stroke:"#fff",strokeWidth:2},animationDuration:1500})]})})}),e.jsxs("div",{className:"mt-4 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mb-1",children:"ì£¼ê°„ íŒ¨í„´"}),e.jsx("h3",{className:"text-slate-700 font-bold text-lg",children:"ì•ˆì •ì ì¸ íë¦„"})]}),e.jsxs("div",{className:"flex gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-xl font-bold text-slate-800",children:"21"}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"ë‹µë³€"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xl font-bold text-slate-800",children:"5"}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"ë©”ëª¨"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[32px] p-1 shadow-lg border border-slate-100 flex items-center gap-1 overflow-hidden relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50 to-indigo-50 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10 p-4 flex-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:[e.jsx(R,{size:12})," Grounded AI"]}),e.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:"ì¹˜ìœ  ì½˜í…ì¸  ë°œê²¬í•˜ê¸°"})]}),e.jsx("div",{className:"relative z-10 pr-2",children:e.jsxs(W,{variant:"primary",onClick:S,isLoading:t,className:"!rounded-2xl !py-3 !px-5 bg-slate-900 text-white shadow-md text-xs",children:[t?e.jsx(C,{size:14,className:"animate-spin"}):e.jsx(H,{size:14}),e.jsx("span",{className:"ml-2",children:"ìƒì„±"})]})})]}),e.jsx("div",{className:"flex overflow-x-auto gap-2 mt-4 pb-2 scrollbar-hide",children:_.map(s=>e.jsx("button",{onClick:()=>v(s),className:`
                            whitespace-nowrap px-4 py-2 rounded-full text-xs font-bold transition-all duration-300
                            ${m===s?"bg-slate-800 text-white shadow-md":"bg-white border border-slate-100 text-slate-400 hover:bg-slate-50"}
                        `,children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"ë‹¹ì‹ ì„ ìœ„í•´"}),e.jsx("button",{className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors",children:"ì „ì²´ ë³´ê¸°"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-24",children:[o.map((s,r)=>{const n=r===0;return e.jsx(de,{content:s,getColor:z,getIcon:E,isFeatured:n,onClick:()=>i(s.id)},s.id)}),e.jsx("div",{ref:b,className:"col-span-2 flex justify-center py-8",children:t?e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx("div",{className:"w-6 h-6 border-2 border-indigo-200 border-t-indigo-500 rounded-full animate-spin"})}):h?e.jsxs("button",{onClick:()=>{f(!1),p(0),w()},className:"text-sm text-slate-500 hover:text-brand-primary transition-colors flex items-center gap-2",children:[e.jsx(C,{size:14}),"ë‹¤ì‹œ ì‹œë„"]}):e.jsx("div",{className:"flex flex-col items-center gap-1 opacity-40",children:e.jsx(P,{size:16,className:"text-slate-400"})})})]})]})]})})}),e.jsx(M,{children:c&&e.jsxs("div",{className:"fixed inset-0 z-modal flex items-center justify-center",children:[e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-900/40 backdrop-blur-md",onClick:()=>i(null)}),(()=>{const s=o.find(x=>x.id===c);if(!s)return null;const n=z(s.type).split(" ").slice(0,2).join(" ");return e.jsxs(d.div,{layoutId:`card-container-${c}`,className:"w-full h-full md:w-[600px] md:h-[85vh] bg-white md:rounded-[40px] shadow-2xl overflow-hidden relative flex flex-col",onClick:x=>x.stopPropagation(),children:[e.jsxs(d.div,{layoutId:`card-bg-${c}`,className:`h-56 shrink-0 bg-gradient-to-br ${n} relative p-8 flex flex-col justify-between`,children:[e.jsx("div",{className:"absolute inset-0 bg-white/30 mix-blend-overlay"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsx("button",{onClick:()=>i(null),className:"w-10 h-10 rounded-full bg-white/60 text-slate-800 flex items-center justify-center backdrop-blur-md hover:bg-white transition-colors",children:e.jsx(V,{size:20})}),e.jsx("span",{className:"px-3 py-1 bg-white/40 backdrop-blur-md rounded-full text-slate-800 text-[10px] font-bold uppercase tracking-widest border border-white/40",children:s.type})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(d.h2,{layoutId:`card-title-${c}`,className:"text-3xl font-sans font-bold text-slate-800 leading-tight mb-2",children:s.title}),e.jsxs("p",{className:"text-slate-600/80 text-xs font-bold uppercase tracking-widest flex items-center gap-2",children:[s.author," ",e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-400"})," ",s.tags[0]]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-8 md:px-10 space-y-8 scrollbar-hide bg-white relative",children:[e.jsx("div",{className:"flex justify-center -mt-14 mb-4 relative z-20",children:e.jsx(se,{text:s.body})}),e.jsx("div",{className:"prose prose-lg text-slate-600 leading-loose whitespace-pre-line font-medium text-center mx-auto",children:s.body}),s.commentary&&e.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 flex gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-500 shrink-0",children:e.jsx(X,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-indigo-900 uppercase tracking-widest mb-1",children:"íë ˆì´í„° ë…¸íŠ¸"}),e.jsx("p",{className:"text-sm text-slate-600 italic leading-relaxed",children:s.commentary})]})]}),s.groundingLinks&&s.groundingLinks.length>0&&e.jsxs("div",{className:"border-t border-slate-100 pt-8",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center justify-center gap-2",children:[e.jsx(R,{size:14})," Sources"]}),e.jsx("div",{className:"space-y-3",children:s.groundingLinks.map((x,F)=>e.jsxs("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 rounded-2xl bg-white border border-slate-100 shadow-sm hover:shadow-md hover:border-indigo-100 transition-all group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-500 shrink-0",children:e.jsx(q,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-700 truncate group-hover:text-indigo-600 transition-colors",children:x.title}),e.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:x.url})]}),e.jsx(K,{size:16,className:"text-slate-300 group-hover:text-indigo-400"})]},F))})]})]})]})})()]})})]})},de=({content:a,getColor:o,getIcon:g,onClick:c,isFeatured:i})=>{const t=o(a.type),u=t.split(" ").slice(0,2).join(" "),m=t.split(" ").pop();return e.jsxs(d.div,{layoutId:`card-container-${a.id}`,onClick:c,initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-20px"},transition:{type:"spring",stiffness:50,damping:20},whileHover:{y:-5,scale:1.02},whileTap:{scale:.98},className:`
                relative cursor-pointer group overflow-hidden
                bg-white rounded-[32px] shadow-[0_8px_20px_-6px_rgba(0,0,0,0.05)]
                border border-slate-100 hover:shadow-xl hover:border-slate-200 transition-all duration-300
                flex flex-col justify-between
                ${i?"col-span-2 aspect-[2/1]":"col-span-1 aspect-[4/5]"}
            `,children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${u} opacity-50 blur-2xl rounded-full -translate-y-1/2 translate-x-1/2`}),e.jsxs("div",{className:"p-5 flex flex-col justify-between h-full relative z-10",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:`
                        w-10 h-10 rounded-full flex items-center justify-center 
                        bg-slate-50 ${m}
                    `,children:g(a.type)})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 block",children:a.type}),e.jsx(d.h3,{layoutId:`card-title-${a.id}`,className:`font-sans font-bold text-slate-800 leading-tight ${i?"text-2xl max-w-[80%]":"text-lg line-clamp-3"}`,children:a.title}),i&&e.jsx("p",{className:"text-sm text-slate-500 mt-2 line-clamp-2 max-w-[90%]",children:a.commentary||a.body.slice(0,50)})]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs("span",{className:"text-[10px] font-bold text-slate-300 flex items-center gap-1",children:[e.jsx(J,{size:12})," Open"]})})]})]})},ge=()=>{const{persona:a}=B();return e.jsx(ce,{persona:a})};export{ge as ContentMain};
