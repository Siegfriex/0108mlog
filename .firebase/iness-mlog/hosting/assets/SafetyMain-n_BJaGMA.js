import{j as e,m as l,A as j}from"./framer-motion-BL4N7xFA.js";import{d as b,j as y,r as n}from"./react-vendor-CHpw1G1i.js";import{B as t}from"./index-Dty_Gb9U.js";import{k as N,b as d,m,A as x}from"./lucide-react-CKY1Dauo.js";import"./firebase-BBl07Gss.js";const S=()=>{const i=b(),[h]=y(),r=h.get("returnTo")||"/chat",[a,c]=n.useState("checking"),s=n.useRef(null);n.useEffect(()=>(a==="checking"&&(s.current=setTimeout(()=>{c("needHelp")},3e4)),()=>{s.current&&clearTimeout(s.current)}),[a]);const u=()=>{s.current&&clearTimeout(s.current),c("safe")},f=()=>{s.current&&clearTimeout(s.current),c("needHelp")},p=()=>{i(r)},g=()=>{i(`/safety/crisis?returnTo=${encodeURIComponent(r)}`)},o=()=>{i(`/safety/tools?returnTo=${encodeURIComponent(r)}`)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsx(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:e.jsxs(j,{mode:"wait",children:[a==="checking"&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-3xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:e.jsx(N,{size:48,className:"text-red-500",strokeWidth:1.5})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-3",children:"지금 안전하신가요?"}),e.jsx("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"즉시 도움이 필요하거나 위험한 상황이라면, 아래 버튼을 눌러주세요."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(t,{onClick:f,className:"w-full bg-red-500 hover:bg-red-600 text-white shadow-lg shadow-red-200 py-4 text-lg font-semibold",children:[e.jsx(d,{size:20,className:"mr-2"}),"도움이 필요해요"]}),e.jsxs(t,{onClick:u,variant:"secondary",className:"w-full border-2 border-green-200 text-green-700 hover:bg-green-50 py-4 text-lg font-semibold",children:[e.jsx(m,{size:20,className:"mr-2"}),"안전해요"]})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-6",children:"30초 내에 응답이 없으면 자동으로 도움 화면으로 이동합니다."})]},"checking"),a==="safe"&&e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-3xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(m,{size:48,className:"text-green-500",strokeWidth:1.5})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-3",children:"안전 확인됨"}),e.jsx("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"안전하시다니 다행입니다. 필요하시면 언제든지 안전망을 이용하실 수 있어요."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(t,{onClick:p,variant:"primary",className:"w-full py-4 text-lg font-semibold",children:["원래 화면으로 돌아가기",e.jsx(x,{size:20,className:"ml-2"})]}),e.jsx(t,{onClick:o,variant:"ghost",className:"w-full py-3 text-slate-600",children:"대처 도구 보기"})]})]},"safe"),a==="needHelp"&&e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-3xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(d,{size:48,className:"text-red-500",strokeWidth:1.5})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-3",children:"도움이 필요하시군요"}),e.jsx("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"전문가 상담이나 대처 도구를 통해 도움을 받으실 수 있어요."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(t,{onClick:g,className:"w-full bg-red-500 hover:bg-red-600 text-white shadow-lg shadow-red-200 py-4 text-lg font-semibold",children:["위기 지원 전화 연결",e.jsx(x,{size:20,className:"ml-2"})]}),e.jsx(t,{onClick:o,variant:"secondary",className:"w-full border-2 border-indigo-200 text-indigo-700 hover:bg-indigo-50 py-4 text-lg font-semibold",children:"대처 도구 사용하기"})]})]},"needHelp")]})})})};export{S as SafetyMain};
