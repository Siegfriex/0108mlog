import{j as e,m as d,A as R}from"./framer-motion-DyOGlghr.js";import{r as n}from"./react-vendor-toRuRpSQ.js";import{E as r,B as c,G as o,A as z,m as D,L as F,n as I}from"./index-DqV5LO6N.js";import{C as P,v as w,A as T,N as L,V as M,Y,Z as G,g as O,q as B,_ as K,X as V}from"./lucide-react-d6c8Yrq5.js";import{R as j,A as W,C as _,X as J,Y as X,T as b,a as A,b as H,P as U,c as Z,d as q,e as $,f as Q,g as ee,h as se}from"./recharts-CXNqbXxy.js";const te=[{id:"sad-1",title:"부드러운 명상 음악 듣기",description:"감정을 억누르지 않고 그대로 느끼며, 부드러운 음악과 함께 호흡에 집중하세요.",category:"Mindfulness",duration:"10분",tags:["명상","음악","호흡"],effectiveness:8},{id:"sad-2",title:"따뜻한 차 한 잔과 함께 일기 쓰기",description:"오늘의 감정을 있는 그대로 기록하고, 왜 이런 기분이 들었는지 탐색해보세요.",category:"Journaling",duration:"15분",tags:["일기","자기탐구","감정기록"],effectiveness:9},{id:"sad-3",title:"가벼운 산책",description:"밖으로 나가 신선한 공기를 마시고, 자연의 소리에 귀 기울여보세요.",category:"Movement",duration:"20분",tags:["산책","자연","운동"],effectiveness:7},{id:"sad-4",title:"위로가 되는 영화나 책",description:"슬픔을 다루는 작품을 통해 자신의 감정을 이해하고 위로받아보세요.",category:"Content",duration:"30분+",tags:["영화","독서","위로"],effectiveness:8},{id:"sad-5",title:"따뜻한 목욕",description:"따뜻한 물에 몸을 담그며 긴장을 풀고, 몸과 마음의 피로를 씻어내세요.",category:"Self-Care",duration:"20분",tags:["목욕","휴식","셀프케어"],effectiveness:7}],ae=[{id:"comm-1",emotion:"슬픔",title:"나와 같은 기분을 가진 사람들은",description:"이번 주 우울한 기분을 경험한 사람들의 73%가 이런 활동들을 했어요",activities:["일기 쓰기 (68%)","부드러운 음악 듣기 (54%)","가벼운 산책 (47%)","따뜻한 차 마시기 (42%)","명상 (38%)"],percentage:73},{id:"comm-2",emotion:"불안",title:"나와 같은 기분을 가진 사람들은",description:"불안한 감정을 느낀 사람들의 81%가 이런 방법으로 마음을 진정시켰어요",activities:["박스 호흡법 (72%)","명상 (65%)","가벼운 스트레칭 (58%)","일기 쓰기 (51%)","긍정적 자기대화 (44%)"],percentage:81},{id:"comm-3",emotion:"기쁨",title:"나와 같은 기분을 가진 사람들은",description:"행복한 감정을 느낀 사람들의 89%가 이런 활동으로 기분을 더욱 좋게 만들었어요",activities:["친구와 대화하기 (82%)","좋아하는 음악 듣기 (76%)","운동하기 (69%)","취미 활동 (64%)","감사 일지 쓰기 (58%)"],percentage:89}],de=({timelineData:m})=>{const[p,x]=n.useState(!1),[k,u]=n.useState(""),[E,g]=n.useState(!1),[v,N]=n.useState("monthly"),[y,C]=n.useState(!1),h=n.useMemo(()=>{const s={[r.JOY]:0,[r.PEACE]:0,[r.ANXIETY]:0,[r.SADNESS]:0,[r.ANGER]:0};return m.forEach(t=>{s[t.emotion]!==void 0&&s[t.emotion]++}),m.length===0?[{name:"평온",value:1,fill:"#2A8E9E"},{name:"기쁨",value:1,fill:"#FCD34D"},{name:"휴식",value:1,fill:"#E2E8F0"}]:Object.entries(s).filter(([t,l])=>l>0).map(([t,l])=>{let a="#CBD5E1",i=t;switch(t){case r.JOY:a="#FCD34D",i="기쁨";break;case r.PEACE:a="#2A8E9E",i="평온";break;case r.ANXIETY:a="#FDA4AF",i="불안";break;case r.SADNESS:a="#94A3B8",i="슬픔";break;case r.ANGER:a="#F87171",i="분노";break}return{name:i,value:l,fill:a}})},[m]),S=async()=>{if(!y){g(!0);try{const s=await I();u(s),C(!0)}catch(s){console.error("서사 가져오기 오류:",s),u("리포트를 불러오는 중 오류가 발생했습니다.")}finally{g(!1)}}};n.useEffect(()=>{p&&!y&&S()},[p]);const f=({active:s,payload:t,label:l})=>s&&t&&t.length?e.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-3 rounded-xl border border-white/50 shadow-xl text-xs",children:[e.jsx("p",{className:"font-bold text-slate-700 mb-1",children:l}),t.map((a,i)=>e.jsxs("p",{style:{color:a.color},className:"font-medium",children:[a.name,": ",a.value]},i))]}):null;return e.jsx("div",{className:"w-full h-full flex flex-col overflow-hidden",children:e.jsxs("div",{className:"max-w-4xl mx-auto w-full h-full flex flex-col px-4 py-6",children:[e.jsx("header",{className:"flex items-center justify-between mb-6 shrink-0",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(P,{size:28,className:"text-brand-primary",strokeWidth:1.5})," Insights"]}),e.jsx("p",{className:"text-slate-500 text-sm mt-1 ml-1",children:"Your emotional landscape, visualized."})]})}),e.jsxs("div",{className:"flex gap-2 mb-6 shrink-0",children:[e.jsx(c,{onClick:()=>N("weekly"),variant:v==="weekly"?"primary":"ghost",className:"flex-1",children:"주간 리포트"}),e.jsx(c,{onClick:()=>N("monthly"),variant:v==="monthly"?"primary":"ghost",className:"flex-1",children:"월간 리포트"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide pb-24 space-y-6 min-h-0",children:[e.jsxs("div",{className:`
                    relative overflow-hidden rounded-[32px] p-8 cursor-pointer group
                    bg-gradient-to-br from-brand-primary via-teal-600 to-brand-dark text-white shadow-xl shadow-brand-primary/30
                    transition-all duration-500 hover:shadow-2xl hover:scale-[1.01] border border-white/10
                `,onClick:()=>x(!0),children:[e.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-10 transform rotate-12 group-hover:scale-110 transition-transform duration-700",children:e.jsx(w,{size:120})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-black/20 to-transparent"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-xs font-bold uppercase tracking-wider border border-white/20 shadow-sm",children:"Monthly Review"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center backdrop-blur-md group-hover:bg-white/20 transition-colors",children:e.jsx(w,{size:20})})]}),e.jsxs("h3",{className:"text-2xl font-serif font-bold mb-3 leading-tight tracking-wide",children:["Your January",e.jsx("br",{}),"Emotional Narrative"]}),e.jsx("p",{className:"text-teal-50 text-sm mb-6 max-w-sm font-medium leading-relaxed opacity-90",children:"AI has analyzed your emotional journey this month. See how you've grown and what patterns emerged."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold group-hover:translate-x-1 transition-transform",children:["Read Full Report ",e.jsx(T,{size:16})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(o,{className:"!p-0 h-80 overflow-hidden relative col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"absolute top-6 left-6 z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 bg-brand-light rounded-lg text-brand-primary",children:e.jsx(L,{size:16})}),e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"Mood Flow"})]}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider font-bold ml-1",children:"Weekly Trends"})]}),e.jsx("div",{className:"w-full h-full pt-16 pr-4 min-h-[300px]",children:e.jsx(j,{width:"100%",height:300,children:e.jsxs(W,{data:z,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorPositive",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#2A8E9E",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#2A8E9E",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorStress",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#FDA4AF",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#FDA4AF",stopOpacity:0})]})]}),e.jsx(_,{strokeDasharray:"3 3",vertical:!1,stroke:"#E2E8F0"}),e.jsx(J,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94A3B8",fontSize:10},dy:10}),e.jsx(X,{axisLine:!1,tickLine:!1,tick:{fill:"#94A3B8",fontSize:10}}),e.jsx(b,{content:e.jsx(f,{})}),e.jsx(A,{type:"monotone",dataKey:"positive",stackId:"1",stroke:"#2A8E9E",fill:"url(#colorPositive)",strokeWidth:3,animationDuration:1500}),e.jsx(A,{type:"monotone",dataKey:"stress",stackId:"2",stroke:"#FDA4AF",fill:"url(#colorStress)",strokeWidth:3,animationDuration:1500})]})})})]}),e.jsxs(o,{className:"!p-6 h-80 flex flex-col items-center justify-center relative",children:[e.jsxs("div",{className:"absolute top-6 left-6 flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-purple-50 rounded-lg text-purple-500",children:e.jsx(M,{size:16})}),e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"Life Balance"})]}),e.jsx("div",{className:"w-full h-full mt-4 min-h-[300px]",children:e.jsx(j,{width:"100%",height:300,children:e.jsxs(H,{cx:"50%",cy:"55%",outerRadius:"70%",data:D,children:[e.jsx(U,{stroke:"#E2E8F0"}),e.jsx(Z,{dataKey:"subject",tick:{fill:"#64748b",fontSize:10,fontWeight:"bold"}}),e.jsx(q,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),e.jsx($,{name:"Balance",dataKey:"A",stroke:"#2A8E9E",strokeWidth:3,fill:"#2A8E9E",fillOpacity:.4}),e.jsx(b,{content:e.jsx(f,{})})]})})})]}),e.jsxs(o,{className:"!p-6 h-80 flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-6 left-6 flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-amber-50 rounded-lg text-amber-500",children:e.jsx(Y,{size:16})}),e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"Emotion Mix"})]}),e.jsxs("div",{className:"flex-1 mt-4 min-h-[300px]",children:[e.jsx(j,{width:"100%",height:300,children:e.jsxs(Q,{children:[e.jsx(ee,{data:h,cx:"50%",cy:"55%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",cornerRadius:8,stroke:"none",children:h.map((s,t)=>e.jsx(se,{fill:s.fill},`cell-${t}`))}),e.jsx(b,{content:e.jsx(f,{})})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-[-10px]",children:h.slice(0,3).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.fill}}),e.jsx("span",{className:"text-[10px] text-slate-500",children:s.name})]},t))})]})]}),e.jsxs(o,{className:"!p-6 h-80 flex flex-col relative col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-brand-light rounded-lg text-brand-primary",children:e.jsx(G,{size:16})}),e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"다음 주 실험"})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("p",{className:"text-slate-600 text-sm mb-4 leading-relaxed",children:"이번 주 패턴을 바탕으로, 다음 주에 시도해볼 수 있는 작은 실험을 제안해드려요."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-white/60 rounded-xl border border-white/60",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"감사 일기 3줄 쓰기"}),e.jsx("span",{className:"text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:"3분"})]}),e.jsx("p",{className:"text-xs text-slate-600",children:"매일 밤 잠들기 전, 오늘 감사했던 것 3가지를 간단히 적어보세요."})]}),e.jsx(c,{variant:"primary",className:"w-full",children:"이 실험 시작하기"})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(O,{className:"text-brand-primary",size:24}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Personalized Insights"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-4 px-2",children:"우울한 기분에 가장 알맞는 활동"}),e.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4 snap-x snap-mandatory",children:te.map((s,t)=>e.jsx(d.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:t*.1},className:"flex-shrink-0 w-[320px] snap-center",children:e.jsxs(o,{className:"!p-6 h-[420px] flex flex-col relative overflow-hidden group cursor-pointer",intensity:"high",enableSpotlight:!0,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50/50 via-purple-50/30 to-pink-50/50 opacity-60 group-hover:opacity-80 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-brand-primary/10 text-brand-primary rounded-full text-xs font-semibold",children:s.category}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(B,{size:12,className:"fill-red-400 text-red-400"}),e.jsxs("span",{children:[s.effectiveness,"/10"]})]})]}),e.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-3 leading-tight",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-6 flex-1",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map(l=>e.jsxs("span",{className:"px-2 py-1 bg-white/60 backdrop-blur-sm rounded-full text-xs text-slate-600 border border-white/40",children:["#",l]},l))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/40",children:[e.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:["⏱ ",s.duration]}),e.jsx(c,{variant:"primary",className:"!px-4 !py-2 text-xs",onClick:()=>{},children:"시작하기"})]})]})]})},s.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-700 mb-4 px-2 flex items-center gap-2",children:[e.jsx(K,{size:20,className:"text-brand-primary"}),"나와 같은 기분을 가진 사람들은 무엇을 할까?"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ae.map((s,t)=>e.jsx(d.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},children:e.jsxs(o,{className:"!p-6 relative overflow-hidden group",intensity:"medium",enableSpotlight:!0,children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-brand-primary/10 to-brand-secondary/10 rounded-full blur-2xl opacity-50 group-hover:opacity-70 transition-opacity"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-primary to-brand-secondary flex items-center justify-center text-white font-bold text-sm",children:[s.percentage,"%"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800",children:s.emotion}),e.jsx("p",{className:"text-xs text-slate-500",children:"이번 주"})]})]})}),e.jsx("h5",{className:"text-base font-bold text-slate-800 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-4 leading-relaxed",children:s.description}),e.jsx("div",{className:"space-y-2",children:s.activities.map((l,a)=>{var i;return e.jsxs(d.div,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:a*.05},className:"flex items-center gap-3 p-3 bg-white/60 backdrop-blur-sm rounded-xl border border-white/40",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-primary/10 flex items-center justify-center text-brand-primary text-xs font-bold flex-shrink-0",children:a+1}),e.jsx("span",{className:"text-sm text-slate-700 font-medium flex-1",children:l.split(" (")[0]}),e.jsx("span",{className:"text-xs text-brand-primary font-semibold",children:(i=l.match(/\((\d+%)\)/))==null?void 0:i[1]})]},a)})})]})]})},s.id))})]})]})]}),e.jsx(R,{children:p&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-modal flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",onClick:()=>x(!1),children:e.jsxs(d.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0},className:"w-full max-w-lg bg-white rounded-[32px] overflow-hidden shadow-2xl relative",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-br from-brand-secondary to-brand-light opacity-50"}),e.jsxs("div",{className:"relative p-8 pt-10",children:[e.jsx("button",{onClick:()=>x(!1),className:"absolute top-6 right-6 p-2 rounded-full bg-white hover:bg-slate-50 transition-colors shadow-sm",children:e.jsx(V,{size:20,className:"text-slate-400"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-white shadow-sm border border-slate-100 text-brand-primary text-[10px] font-bold uppercase tracking-widest",children:"January Review"}),e.jsxs("h2",{className:"text-2xl font-serif font-bold text-slate-800 mt-4 leading-tight",children:["Your Emotional",e.jsx("br",{}),"Narrative"]})]}),e.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:E?e.jsx(F,{}):e.jsx("div",{className:"prose prose-p:text-slate-600 prose-p:leading-loose prose-p:font-medium max-h-[40vh] overflow-y-auto pr-2 scrollbar-hide",children:e.jsx("p",{children:k})})}),e.jsx(c,{onClick:()=>x(!1),variant:"primary",className:"w-full mt-8",children:"Close Report"})]})]})})})]})})};export{de as R};
