import{j as e}from"./framer-motion-BL4N7xFA.js";import{d as N,r}from"./react-vendor-CHpw1G1i.js";import{G as n,B as i,p as u,m as g,O as b,q as d,Q as y}from"./index-Dty_Gb9U.js";import{z as x,aj as C,ak as m}from"./lucide-react-CKY1Dauo.js";import"./firebase-BBl07Gss.js";const z=()=>{const c=N(),[t,o]=r.useState(!1),[h,j]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const a=await u();o(a.conversationStorage)}catch(a){console.error("Error loading consent:",a)}finally{j(!1)}})()},[]);const p=async()=>{try{const s=!t;await g(s),o(s),alert(s?"대화 저장이 활성화되었습니다.":"대화 저장이 비활성화되었습니다. 기존 대화는 유지되며, 새로운 대화는 저장되지 않습니다.")}catch(s){console.error("Error saving consent:",s),alert("동의 설정 저장 중 오류가 발생했습니다.")}},f=async()=>{try{const s=await b(),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`maumlog-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a),alert("데이터 내보내기가 완료되었습니다.")}catch(s){d("Privacy.handleExportData",s),alert("데이터 내보내기 중 오류가 발생했습니다.")}},v=async()=>{if(confirm("모든 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{await y(),alert("모든 데이터가 삭제되었습니다."),c("/profile")}catch(s){d("Privacy.handleDeleteAllData",s),alert("데이터 삭제 중 오류가 발생했습니다.")}};return e.jsxs("div",{className:"h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>c("/profile"),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:"←"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"개인정보 관리"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{size:20,className:"text-slate-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"대화 저장"}),e.jsx("p",{className:"text-sm text-slate-600",children:"대화와 일기 원문 저장 동의"})]})]}),!h&&e.jsx("button",{onClick:p,className:`
                    w-12 h-6 rounded-full transition-colors relative
                    ${t?"bg-brand-primary":"bg-slate-300"}
                  `,"aria-label":t?"대화 저장 끄기":"대화 저장 켜기",children:e.jsx("div",{className:`
                      w-5 h-5 bg-white rounded-full absolute top-0.5 shadow-sm transition-transform
                      ${t?"translate-x-6":"translate-x-0.5"}
                    `})})]}),e.jsx("div",{className:"bg-slate-50 rounded-lg p-3 text-xs text-slate-600",children:t?e.jsx("p",{children:"대화와 일기 원문이 저장됩니다. 감정 수치와 태그는 항상 저장됩니다."}):e.jsx("p",{children:"대화와 일기 원문 저장이 비활성화되었습니다. 기존 대화는 유지되며, 새로운 대화는 저장되지 않습니다."})})]})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{size:20,className:"text-slate-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"데이터 내보내기"}),e.jsx("p",{className:"text-sm text-slate-600",children:"모든 데이터를 JSON/CSV 형식으로 내보내기"})]})]}),e.jsxs(i,{onClick:f,variant:"secondary",className:"w-full",children:[e.jsx(C,{size:18,className:"mr-2"}),"데이터 내보내기"]})]})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(m,{size:20,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"전체 데이터 삭제"}),e.jsx("p",{className:"text-sm text-slate-600",children:"모든 대화 및 기록을 영구적으로 삭제합니다."})]})]}),e.jsxs(i,{onClick:v,variant:"ghost",className:"w-full text-red-600 hover:bg-red-50",children:[e.jsx(m,{size:18,className:"mr-2"}),"전체 데이터 삭제"]})]})})]})]})};export{z as Privacy};
