import{j as e,m as p}from"./framer-motion-BL4N7xFA.js";import{r as n}from"./react-vendor-CHpw1G1i.js";import{C as j,T as c,D as o,E as y,L as N,G as x,o as b}from"./index-AFX2_y7y.js";import{b as T,v as I,N as u,$ as C}from"./lucide-react-J6DJLIhr.js";import{R as v,L as A,C as E,X as D,Y as S,T as L,i as _}from"./recharts-D37Qx2ho.js";import"./firebase-BBl07Gss.js";const w=({timelineData:t})=>{const[g,f]=n.useState(!0),r=n.useMemo(()=>j(),[]),d=n.useMemo(()=>t.filter(s=>(new Date().getTime()-new Date(s.date).getTime())/c.MILLISECONDS_PER_DAY<=c.DAYS_IN_WEEK).sort((s,i)=>new Date(s.date).getTime()-new Date(i.date).getTime()).map(s=>({date:new Date(s.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"}),intensity:s.intensity||0,emotion:s.emotion})),[t]),m=n.useMemo(()=>{if(t.length<o.MIN_DATA_POINTS_FOR_PATTERN)return[];const{anxietyCount:a,highIntensityCount:s}=t.reduce((l,h)=>(h.emotion===y.ANXIETY&&l.anxietyCount++,(h.intensity||0)>=o.HIGH_INTENSITY_VALUE&&l.highIntensityCount++,l),{anxietyCount:0,highIntensityCount:0}),i=[];return a>t.length*o.ANXIETY_RATIO&&i.push({type:"warning",message:"최근 불안한 감정이 자주 기록되고 있어요",icon:e.jsx(T,{size:20})}),s>t.length*o.HIGH_INTENSITY_RATIO&&i.push({type:"info",message:"강도가 높은 감정이 자주 나타나고 있어요",icon:e.jsx(I,{size:20})}),i},[t]);return n.useEffect(()=>{const a=setTimeout(()=>f(!1),c.LOADING_DELAY);return()=>clearTimeout(a)},[]),g?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(N,{})}):e.jsxs("div",{className:"w-full h-full flex flex-col p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(u,{size:28,className:"text-brand-primary"}),"실시간 모니터"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"당신의 감정 패턴을 실시간으로 추적하고 있어요"})]}),e.jsxs(x,{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"감정 추이 (최근 7일)"}),d.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(u,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"아직 충분한 데이터가 없어요"})]}):e.jsx("div",{className:"min-h-48",children:e.jsx(v,{width:"100%",height:200,children:e.jsxs(A,{data:d,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:r.grid}),e.jsx(D,{dataKey:"date",stroke:r.axis,fontSize:12}),e.jsx(S,{domain:[0,10],stroke:r.axis,fontSize:12}),e.jsx(L,{contentStyle:{backgroundColor:"var(--color-glass-surface)",border:"1px solid var(--color-glass-border)",borderRadius:"var(--radius-lg)"}}),e.jsx(_,{type:"monotone",dataKey:"intensity",stroke:r.line,strokeWidth:3,dot:{r:4,fill:r.dot},activeDot:{r:6}})]})})})]}),m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"패턴 알림"}),m.map((a,s)=>e.jsx(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},children:e.jsx(x,{className:`
                  ${a.type==="warning"?"border-orange-200 bg-orange-50/50":"border-blue-200 bg-blue-50/50"}
                `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center shrink-0
                    ${a.type==="warning"?"text-orange-600 bg-orange-100":"text-blue-600 bg-blue-100"}
                  `,children:a.icon}),e.jsx("p",{className:"text-sm text-slate-700 flex-1",children:a.message})]})})},s))]}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-100 flex items-center justify-center text-purple-600 shrink-0",children:e.jsx(C,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"오늘의 인사이트"}),e.jsx("p",{className:"text-sm text-slate-600",children:t.length>0?`지금까지 ${t.length}개의 감정 기록을 남기셨네요. 계속 기록하면 더 정확한 패턴을 발견할 수 있어요.`:"감정을 기록하기 시작하면 인사이트를 제공해드릴게요."})]})]})})]})},G=()=>{const{timelineData:t}=b();return e.jsx(w,{timelineData:t})};export{G as MonitorDashboardPage};
