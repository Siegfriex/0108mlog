import{j as e,m as d,A as C}from"./framer-motion-BL4N7xFA.js";import{r as c}from"./react-vendor-CHpw1G1i.js";import{B as i,G as j,P as k}from"./index-AFX2_y7y.js";import{al as S,Q as T,aj as D,a0 as z,ak as f}from"./lucide-react-J6DJLIhr.js";const G=({conversations:l,onDeleteConversation:x,onDeleteAll:m,onExport:h})=>{const[p,u]=c.useState("timeline"),[B,L]=c.useState(null),[g,a]=c.useState(!1),[n,t]=c.useState(null),b=()=>{n&&x&&(x(n),a(!1),t(null))},N=()=>{m&&(m(),a(!1))},y=s=>{if(h)h(s);else{const r=JSON.stringify(l,null,2),v=new Blob([r],{type:"application/json"}),w=URL.createObjectURL(v),o=document.createElement("a");o.href=w,o.download=`maumlog-conversations-${new Date().toISOString().split("T")[0]}.json`,o.click()}};return e.jsxs("div",{className:"w-full h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"대화 관리"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[l.length,"개의 대화 기록"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{onClick:()=>u(p==="timeline"?"list":"timeline"),variant:"ghost",className:"!px-3",children:p==="timeline"?e.jsx(S,{size:18}):e.jsx(T,{size:18})}),e.jsx(i,{onClick:()=>y("json"),variant:"ghost",className:"!px-3","aria-label":"JSON 내보내기",children:e.jsx(D,{size:18})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide space-y-3",children:l.length===0?e.jsx(j,{children:e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(z,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"아직 저장된 대화가 없어요"})]})}):l.map(s=>e.jsx(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"relative group",children:e.jsx(j,{className:"!p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-brand-primary bg-brand-light px-2 py-1 rounded-md",children:s.emotion}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(s.date).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-1",children:s.summary}),s.nuanceTags&&s.nuanceTags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.nuanceTags.map(r=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full",children:r},r))})]}),e.jsx("button",{onClick:()=>{t(s.id),a(!0)},className:"p-2 rounded-full hover:bg-red-50 text-slate-400 hover:text-red-600 transition-colors opacity-0 group-hover:opacity-100","aria-label":"대화 삭제",children:e.jsx(f,{size:18})})]})})},s.id))}),l.length>0&&e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsxs(i,{onClick:()=>{t("all"),a(!0)},variant:"ghost",className:"w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(f,{size:18,className:"mr-2"}),"전체 대화 삭제"]})}),e.jsx(k,{children:e.jsx(C,{children:g&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-modal flex items-center justify-center bg-slate-900/50 backdrop-blur-sm",onClick:()=>{a(!1),t(null)},children:e.jsxs(d.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"대화 삭제 확인"}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:n==="all"?"모든 대화를 삭제하시겠어요? 삭제된 대화는 30일간 복구 가능합니다.":"이 대화를 삭제하시겠어요? 삭제된 대화는 30일간 복구 가능합니다."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(i,{onClick:()=>{a(!1),t(null)},variant:"ghost",className:"flex-1",children:"취소"}),e.jsx(i,{onClick:n==="all"?N:b,variant:"primary",className:"flex-1 bg-red-600 hover:bg-red-700",children:"삭제"})]})]})})})})]})};export{G as C};
